<html>
<head>
    <title>Comet Ping test</title>
    <script src="/leon/leon.js?loadAngular=false" type="text/javascript"></script>
    <script type="text/javascript">
	    $(function() {
	        getLeon().subscribeTopic("ping", function(data) {
				if(data.number) {
	                $("#result").append(data.number);
	            }
	            else if(data.done) {
	                $("#isDone").text("true");
	            }
	        });

	        $("#sendPing").click(function() {
	            getLeon().service("/pingService", "ping").call(0);
	        });
	    });
    </script>
</head>

<body>
<div>
    <h1>Comet Ping example</h1>
    <hr />

    <a id="sendPing" href="#">Send ping to server</a>
    <br/>

    <h2>Result</h2>
    <div id="result"></div>

    <h2>Done?</h2>
    <div id="isDone"></div>
</div>
</body>
</html>
