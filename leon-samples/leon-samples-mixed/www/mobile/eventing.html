<!DOCTYPE html>

<html class="ui-mobile landscape">

  <head>
    <title>jQuery Mobile Example Index</title>
    <#include "/io/leon/templates/commonjs.html" />
    <#include "/io/leon/templates/mobilejs.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">
      $('#foo').live('pagecreate', function(event) {
        alert('pagecreate fired: about to modify header...');

		    var $page = $('#foo');
  			var $header = $page.children(":jqmData(role=header)");
		    $header.find("h1").html("<p>Events example</p>");
        $page.page();
      });

      $(document).bind("pagebeforechange", function(e, data) {
        alert('pagebeforechange fired: about to modify content...');

        var $page = $('#foo');
        var $content = $page.children(":jqmData(role=content)");
        $content.find("#toReplace").html("<p>This text was included upon pagebeforechange!</p>");

        $page.page();
      });

      $(document).bind("pagechange", function(e, data) {
        alert('pagechange fired');
      });

      $(document).bind("pagechangefailed", function(e, data) {
        alert('pagebechangefailed fired');
      });
    </script>
  </head>

  <body class="ui-mobile-viewport">
    <div data-role="page" id="foo">

      <div data-role="header">
        <h1>If you see this text an error occured. Try reloading the page...</h1>
      </div> <!-- /header -->

      <div data-role="content">
        <div id="toReplace">If you see this text an error occured. Try reloading the page...</div>
        <br/>
        <p><a href="http://jquerymobile.com/demos/1.0rc1/docs/pages/page-dynamic.html" target="_blank">more on dynamics...</a></p>
        <p><a href="http://jquerymobile.com/demos/1.0rc1/docs/pages/page-scripting.html" target="_blank">more on scripting...</a></p>
      </div> <!-- /content -->

      <div data-role="footer">
        <h4>Back to <a href="index.html">examples index</a></h4>
      </div> <!-- /footer -->

    </div> <!-- /page -->
  </body>
</html>
