<!doctype html>
<html xmlns:ng="http://angularjs.org" xmlns:ngm="http://github.com/tigbro/jquery-mobile-angular-adapter">

<html class="ui-mobile landscape">

  <head>
    <title>---------Leon Rocks On Mobile!-----------</title>
    <#include "/io/leon/templates/full.mobile.html" />
    <script src="browser/controllers.js" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body class="ui-mobile-viewport" ng:controller="LeonJaxCtrl">

    <leon:subscribe topic="leonjax.room.messages" filterOn="room" handlerFn="handleMessage"/>

    <!-------------------------- page1 -------------------------->
    <div id="page1" data-role="page" data-fullscreen="true" data-title="Step 1: Enter your name...">
      <!------ header ------>
      <div data-role="header">
        <h1>Leon JAX Mobile</h1>
      </div>
      <!------ getContent ------>
      <div data-role="content">
        <div data-role="fieldcontain">
          <label for="namePage1">Your name:</label>
          <input id="namePage1" type="text" name="user.name"/>
        </div>
        <a href="#page2" data-role="button" data-inline="false">Go!</a>
      </div>
      <!------ footer ------>
      <div data-role="footer">
        <h4>&copy; 2011 by Weigle Wilczek GmbH</h4>
      </div>
    </div>

    <!-------------------------- page2 -------------------------->
    <div id="page2" data-role="page" data-fullscreen="true" data-title="Step 2: Select your room and post your messages!">
      <!------ header ------>
      <div data-role="header">
        <h1>Leon JAX Mobile</h1>
      </div>
      <!------ getContent ------>
      <div data-role="content">
        <h2>Hello {{user.name}}!</h2>
        <br/>
        <div>
          <div data-role="fieldcontain">
            <label for="name_page2">Your name:</label>
            <input id="name_page2" type="text" name="user.name"/>
          </div>
          <div data-role="fieldcontain">
            <label for="room" class="select">Room:</label>
            <select id="room" name="user.room" ng:options="r.name for r in rooms" onchange="reset()" data-native-menu="false" tabindex="-1">
              <option value="" data-placeholder="true">Choose room...</option>
            </select>
          </div>
          <div data-role="fieldcontain">
            <label for="messageTextArea">Your message:</label>
            <textarea id="messageTextArea" name="message"></textarea>
          </div>
          <button ngm:click="postMessage(message)" ng:disabled="{{message.length == 0 || user.room == null}}" data-inline="true">Post message</button>
        </div>
        <br/>
        <div id="messages">
        </div>
      </div>
      <!------ footer ------>
      <div data-role="footer">
        <h4>&copy; 2011 by Weigle Wilczek GmbH</h4>
      </div>
    </div>
  </body>
</html>
